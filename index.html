<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no" />
  <title>Will you be my Valentine?</title>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <style>
    :root {
      --bg1: #ffdeeb;
      --bg2: #fff5f8;
      --card: rgba(255, 255, 255, 0.92);
      --yes: #ff4d8d;
      --yesHover: #ff2a70;
      --text: #5a3d4a;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      margin: 0;
      min-height: 100svh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--bg2), var(--bg1));
      font-family: 'Segoe UI', 'Roboto', sans-serif;
      overflow: hidden;
      color: var(--text);
    }

    .bg-hearts { position: fixed; inset: 0; pointer-events: none; z-index: 0; }

    .card {
      position: relative;
      z-index: 10;
      width: min(420px, 92vw);
      height: min(700px, 90vh);
      padding: 20px;
      background: var(--card);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 30px;
      text-align: center;
      border: 2px solid rgba(255,255,255,0.6);
      box-shadow: 0 20px 50px rgba(255, 105, 180, 0.2);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .progress-bar { display: flex; justify-content: center; gap: 8px; margin-bottom: 15px; flex-shrink: 0; }
    .step { width: 33%; height: 6px; background: #ffd1dc; border-radius: 10px; transition: 0.4s; }
    .step.active { background: var(--yes); }

    .view-section { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; }
    .hidden { display: none !important; }

    .art { width: 130px; margin-bottom: 10px; }

    h1 { font-size: 1.6rem; margin: 10px 0; font-weight: 800; }

    /* Increased height slightly to give buttons more room to move */
    .button-zone { position: relative; width: 100%; height: 200px; margin: 10px 0; }

    button {
      padding: 14px 28px;
      font-size: 17px;
      font-weight: 700;
      border-radius: 50px;
      border: none;
      cursor: pointer;
      user-select: none;
      transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275), background 0.3s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    #yesBtn { background: var(--yes); color: white; z-index: 5; position: relative; }
    #noBtn { position: absolute; background: #f1f3f5; color: #71767b; font-size: 15px; z-index: 10; transition: left 0.1s, top 0.1s; }

    /* The Pulsing Animation for the Yes Button */
    .pulse-yes {
      animation: heartBeat 0.8s infinite alternate !important;
      background: var(--yesHover) !important;
    }

    @keyframes heartBeat {
      from { transform: scale(var(--s, 1)); filter: brightness(1); }
      to { transform: scale(calc(var(--s, 1) * 1.1)); filter: brightness(1.2); }
    }

    .reasons-list { list-style: none; padding: 0; margin: 0; width: 100%; overflow-y: auto; max-height: 380px; text-align: left; }
    .reasons-list li { background: white; margin-bottom: 10px; padding: 12px 15px; border-radius: 12px; font-size: 14px; cursor: pointer; border: 1px solid #ffeef2; }
    
    .anim-shake { animation: shake 0.5s; }
    .anim-spin  { animation: spin 0.6s; }
    .anim-warp  { animation: warp 0.5s; }

    @keyframes shake { 0%, 100% {transform:translateX(0);} 25% {transform:translateX(-10px);} 75% {transform:translateX(10px);} }
    @keyframes spin { 0% {transform:rotate(0);} 100% {transform:rotate(360deg);} }
    @keyframes warp { 50% {transform: skewX(20deg) scale(0.8);} }

    .bounce-img { 
      width: auto; 
      max-width: 90%; 
      max-height: 40vh; 
      border-radius: 20px; 
      animation: jelly 2s infinite; 
      margin-top: 15px; 
      object-fit: contain;
    }
    @keyframes jelly { 0%, 100% {transform:scale(1);} 50% {transform:scale(1.05, 0.95) translateY(-5px);} }

    .timer { font-size: 12px; color: #999; margin-top: 15px; font-family: monospace; }
  </style>
</head>
<body>

  <div class="bg-hearts" id="bgHearts"></div>

  <main class="card">
    <div class="progress-bar">
      <div class="step active" id="step1"></div>
      <div class="step" id="step2"></div>
      <div class="step" id="step3"></div>
    </div>

    <section id="view1" class="view-section">
      <svg class="art" viewBox="0 0 320 240">
        <path d="M250 50 C250 33 270 25 282 38 C294 25 314 33 314 50 C314 78 282 92 282 106 C282 92 250 78 250 50Z" fill="#ff4d7d"/>
        <path d="M90 120 C90 70 140 40 190 60 C240 40 290 70 290 120 C290 180 240 210 190 210 C140 210 90 180 90 120Z" fill="#f7c7a1"/>
        <circle cx="160" cy="130" r="8" fill="#333"/>
        <circle cx="220" cy="130" r="8" fill="#333"/>
      </svg>
      <h1>Spriha, will you be my valentine? üå∏</h1>
      <div class="button-zone" id="zone">
        <button id="yesBtn">Yes!</button>
        <button id="noBtn" style="left: 60%; top: 40%;">No</button>
      </div>
      <button id="whyBtn" style="background:transparent; color:var(--yes); text-decoration:underline; box-shadow:none;">Why should I?? ü§î</button>
      <div class="timer" id="timer">Waiting for: 00:00:00</div>
    </section>

    <section id="view2" class="view-section hidden">
      <h2>Reasons Why... üìù</h2>
      <ul class="reasons-list">
        <li onclick="this.classList.toggle('anim-shake')">I will sing for you üé§</li>
        <li onclick="this.classList.toggle('anim-spin')">I make the best bad jokes ü§°</li>
        <li>I will get you gajras üåº</li>
        <li>I will kill the bugs ü™≥</li>
        <li>I send good morning texts ‚òÄÔ∏è</li>
        <li onclick="this.classList.toggle('anim-warp')">You look too cute, I look okay‚Ä¶ BALANCE ‚öñÔ∏è</li>
        <li>I will open bottles and jars for you ü´ô</li>
        <li>I will hold you during violent movie scenes ü´£</li>
        <li>Unlimited cuddles supply üß∏</li>
        <li style="font-weight:bold; color:var(--yes);">I LOVE YOU A LOT (like, A LOT) ‚ù§Ô∏è</li>
      </ul>
      <button id="backBtn" style="width:100%; background:var(--text); color:white; margin-top:10px;">I am convinced!</button>
    </section>

    <section id="view3" class="view-section hidden">
      <h2 style="font-size: 2.2rem; color: var(--yes); margin-bottom: 10px;">YAY! ‚ù§Ô∏è</h2>
      <img class="bounce-img" src="https://github.com/jute031005-cloud/Paras_valentine/blob/v3/assets/image_paras.png?raw=true" alt="Us" />
    </section>
  </main>

  <script>
    const zone = document.getElementById("zone");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const timerEl = document.getElementById("timer");
    let noAttempts = 0;
    let yesScale = 1;

    // Timer Logic
    const start = new Date();
    setInterval(() => {
      const diff = Math.floor((new Date() - start) / 1000);
      const h = Math.floor(diff/3600).toString().padStart(2,'0');
      const m = Math.floor((diff%3600)/60).toString().padStart(2,'0');
      const s = (diff%60).toString().padStart(2,'0');
      timerEl.innerText = `Waiting for: ${h}:${m}:${s}`;
    }, 1000);

    // No Button Logic
    function moveNo() {
      noAttempts++;
      
      // 1. Grow Yes Button
      yesScale += 0.2; 
      yesBtn.style.setProperty('--s', yesScale);
      yesBtn.style.transform = `scale(${yesScale})`;

      // 2. Hide No button eventually
      if (noAttempts >= 10) {
        noBtn.style.display = 'none';
        yesBtn.innerText = "PRESS ME! ü•∫";
        yesBtn.classList.add('pulse-yes');
        return;
      }

      // 3. Calculate Safe Position (No overlap with Yes)
      const zoneRect = zone.getBoundingClientRect();
      const yesRect = yesBtn.getBoundingClientRect();
      const noRect = noBtn.getBoundingClientRect();

      let newLeft, newTop;
      let safe = false;
      const buffer = 10; // Space between buttons

      // Try 50 times to find a safe spot
      for(let i = 0; i < 50; i++) {
        // Random position within zone
        newLeft = Math.random() * (zoneRect.width - noRect.width);
        newTop = Math.random() * (zoneRect.height - noRect.height);

        // Convert YesRect to relative coordinates within the zone
        // We use getBoundingClientRect for size/current position, but need to compare relative to Zone
        const yesRelLeft = yesRect.left - zoneRect.left;
        const yesRelTop = yesRect.top - zoneRect.top;
        
        // Check for overlap
        // If the new No position is NOT overlapping the Yes position (with buffer)
        if (
          newLeft + noRect.width < yesRelLeft - buffer || // Totally to the left
          newLeft > yesRelLeft + yesRect.width + buffer || // Totally to the right
          newTop + noRect.height < yesRelTop - buffer || // Totally above
          newTop > yesRelTop + yesRect.height + buffer    // Totally below
        ) {
          safe = true;
          break; // Found a safe spot!
        }
      }

      // If we couldn't find a safe spot (rare), we accept the overlap to prevent freezing
      // Otherwise use the safe coordinates
      noBtn.style.left = newLeft + "px";
      noBtn.style.top = newTop + "px";
    }

    noBtn.addEventListener("mouseover", moveNo);
    noBtn.addEventListener("touchstart", (e) => { e.preventDefault(); moveNo(); });

    // Navigation
    yesBtn.addEventListener("click", () => {
      document.getElementById("view1").classList.add("hidden");
      document.getElementById("view3").classList.remove("hidden");
      document.getElementById("step2").classList.add("active");
      document.getElementById("step3").classList.add("active");
      confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
    });

    document.getElementById("whyBtn").addEventListener("click", () => {
      document.getElementById("view1").classList.add("hidden");
      document.getElementById("view2").classList.remove("hidden");
      document.getElementById("step2").classList.add("active");
    });

    document.getElementById("backBtn").addEventListener("click", () => {
      document.getElementById("view2").classList.add("hidden");
      document.getElementById("view1").classList.remove("hidden");
    });

    // Background Hearts
    setInterval(() => {
      const h = document.createElement("div");
      h.innerHTML = "‚ù§Ô∏è";
      h.style.cssText = `position:fixed; left:${Math.random()*100}vw; top:105vh; font-size:${Math.random()*20+15}px; transition:4s; opacity:${Math.random()};`;
      document.getElementById("bgHearts").appendChild(h);
      setTimeout(() => h.style.transform = "translateY(-110vh) rotate(360deg)", 50);
      setTimeout(() => h.remove(), 5000);
    }, 400);
  </script>
</body>
</html>
