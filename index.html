<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no" />
  <title>Will you be my Valentine?</title>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <style>
    :root {
      --bg1: #ffdeeb;
      --bg2: #fff5f8;
      --card: rgba(255, 255, 255, 0.92);
      --yes: #ff4d8d;
      --yesHover: #ff2a70;
      --text: #5a3d4a;
      --accent: #ff8fa3;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      margin: 0;
      min-height: 100svh; /* Mobile friendly height */
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--bg2), var(--bg1));
      font-family: 'Segoe UI', 'Roboto', sans-serif;
      overflow: hidden;
      color: var(--text);
    }

    /* BACKGROUND HEARTS */
    .bg-hearts {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
    }

    /* CARD CONTAINER */
    .card {
      position: relative;
      z-index: 10;
      width: min(420px, 92vw);
      height: min(700px, 90vh); /* Fixed height for consistency */
      padding: 20px;
      background: var(--card);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 30px;
      text-align: center;
      border: 2px solid rgba(255,255,255,0.6);
      box-shadow: 0 20px 50px rgba(255, 105, 180, 0.2);
      display: flex;
      flex-direction: column;
      overflow: hidden; /* Hide scrollbars within card structure */
    }

    /* PROGRESS BAR */
    .progress-bar {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 15px;
    }
    .step {
      width: 33%;
      height: 6px;
      background: #ffd1dc;
      border-radius: 10px;
      transition: background 0.4s ease;
    }
    .step.active { background: var(--yes); }

    /* CONTENT SECTIONS */
    .view-section {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    
    /* Hide views by default */
    .hidden { display: none !important; }

    /* ARTWORK */
    .art {
      width: 130px;
      margin-bottom: 10px;
      filter: drop-shadow(0 4px 6px rgba(0,0,0,0.05));
    }

    h1 {
      font-size: 1.6rem;
      margin: 10px 0;
      line-height: 1.2;
      font-weight: 800;
    }

    /* BUTTON ZONES */
    .button-zone {
      position: relative;
      width: 100%;
      height: 160px; /* Space for buttons to move */
      margin: 10px 0;
    }

    button {
      padding: 14px 28px;
      font-size: 17px;
      font-weight: 700;
      border-radius: 50px;
      border: none;
      cursor: pointer;
      user-select: none;
      transition: all 0.2s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    #yesBtn {
      background: var(--yes);
      color: white;
      z-index: 5;
    }

    #noBtn {
      position: absolute;
      background: #f1f3f5;
      color: #71767b;
      font-size: 15px;
      z-index: 10;
      transition: top 0.2s, left 0.2s; /* Smooth movement */
    }

    #whyBtn {
      background: transparent;
      color: var(--yes);
      text-decoration: underline;
      font-size: 14px;
      margin-top: -10px;
      box-shadow: none;
    }

    /* REASONS LIST (VIEW 2) */
    .reasons-list {
      list-style: none;
      padding: 0;
      margin: 0;
      width: 100%;
      overflow-y: auto; /* Scrollable inside card */
      max-height: 380px;
      text-align: left;
    }

    .reasons-list li {
      background: white;
      margin-bottom: 10px;
      padding: 12px 15px;
      border-radius: 12px;
      font-size: 14px;
      cursor: pointer;
      border: 1px solid #ffeef2;
      position: relative;
      user-select: none;
    }
    
    .reasons-list li:before {
      content: '‚ù§Ô∏è';
      margin-right: 8px;
    }

    /* WONKY ANIMATION CLASSES */
    .anim-shake   { animation: shake 0.5s; }
    .anim-bounce  { animation: jelly-bounce 0.6s; }
    .anim-blur    { animation: blur-out 0.6s; }
    .anim-spin    { animation: spin-jump 0.7s; }
    .anim-grow    { animation: pop 0.4s; }
    .anim-tilt    { animation: tilt-shaking 0.4s; }
    .anim-warp    { animation: skew-warp 0.5s; }
    .anim-fade    { animation: flash-fade 0.6s; }
    .anim-slide   { animation: slide-glitch 0.4s; }
    .anim-drip    { animation: drip 0.6s; }

    #backBtn {
      width: 100%;
      background: var(--text);
      color: white;
      margin-top: 10px;
    }

    /* RESULT (VIEW 3) */
    .bounce-img {
      width: 100%;
      max-width: 260px;
      border-radius: 20px; /* Or 50% for circle */
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      animation: jelly-bounce 2s infinite ease-in-out;
      margin-top: 20px;
      object-fit: cover;
    }

    .timer {
      font-size: 12px;
      color: #999;
      margin-top: 15px;
      font-family: monospace;
    }

    /* KEYFRAMES */
    @keyframes shake { 0%, 100% {transform:translateX(0);} 25% {transform:translateX(-10px);} 75% {transform:translateX(10px);} }
    @keyframes blur-out { 0% {filter:blur(0);} 50% {filter:blur(4px) scale(1.1);} 100% {filter:blur(0);} }
    @keyframes spin-jump { 0% {transform:rotate(0) translateY(0);} 50% {transform:rotate(180deg) translateY(-20px);} 100% {transform:rotate(360deg) translateY(0);} }
    @keyframes tilt-shaking { 0% { transform: rotate(0deg); } 25% { transform: rotate(5deg); } 75% { transform: rotate(-5deg); } 100% { transform: rotate(0deg); } }
    @keyframes skew-warp { 0% { transform: skewX(0); } 50% { transform: skewX(40deg) scale(0.9); } 100% { transform: skewX(0); } }
    @keyframes flash-fade { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
    @keyframes slide-glitch { 0% { transform: translate(0); } 20% { transform: translate(-10px, 10px); } 40% { transform: translate(10px, -10px); } 100% { transform: translate(0); } }
    @keyframes drip { 0% { transform: scaleY(1); } 50% { transform: scaleY(1.4) origin(top); } 100% { transform: scaleY(1); } }
    @keyframes pop { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
    @keyframes jelly-bounce { 
      0%, 100% { transform: scale(1, 1) translateY(0); }
      25% { transform: scale(0.95, 1.05) translateY(-10px); }
      50% { transform: scale(1.05, 0.95) translateY(0); }
      75% { transform: scale(0.98, 1.02) translateY(-5px); }
    }

  </style>
</head>

<body>
  <div class="bg-hearts" id="bgHearts"></div>

  <main class="card">
    <div class="progress-bar">
      <div class="step active" id="step1"></div>
      <div class="step" id="step2"></div>
      <div class="step" id="step3"></div>
    </div>

    <section id="view1" class="view-section">
      <svg class="art" viewBox="0 0 320 240" xmlns="http://www.w3.org/2000/svg">
        <path d="M250 50 C250 33 270 25 282 38 C294 25 314 33 314 50 C314 78 282 92 282 106 C282 92 250 78 250 50Z" fill="#ff4d7d"/>
        <path d="M90 120 C90 70 140 40 190 60 C240 40 290 70 290 120 C290 180 240 210 190 210 C140 210 90 180 90 120Z" fill="#f7c7a1"/>
        <circle cx="160" cy="130" r="8" fill="#333"/>
        <circle cx="220" cy="130" r="8" fill="#333"/>
        <path d="M180 155 Q190 165 200 155" stroke="#ff7aa2" stroke-width="3" fill="none" stroke-linecap="round" />
      </svg>
      
      <h1>Spriha, will you be my valentine? üå∏</h1>

      <div class="button-zone" id="zone">
        <button id="yesBtn">Yes!</button>
        <button id="noBtn" style="left: 60%; top: 40%;">No</button>
      </div>
      
      <button id="whyBtn">Wait, why should I?? ü§î</button>

      <div class="timer" id="timer">Waiting since: 00:00:00</div>
    </section>

    <section id="view2" class="view-section hidden">
      <h2 style="margin: 0 0 15px 0;">Top 10 Reasons üìù</h2>
      <ul class="reasons-list">
        <li onclick="playAnim(this, 'anim-shake')">I make the best bad jokes.</li>
        <li onclick="playAnim(this, 'anim-bounce')">I am an expert snack provider.</li>
        <li onclick="playAnim(this, 'anim-blur')"> I will steral your notes.</li>
        <li onclick="playAnim(this, 'anim-spin')">I will carry your purse üï∑Ô∏è.</li>
        <li onclick="playAnim(this, 'anim-grow')">I send good morning texts.</li>
        <li onclick="playAnim(this, 'anim-tilt')">You look cute, I look okay. Balance.</li>
        <li onclick="playAnim(this, 'anim-warp')">I know your food order.</li>
        <li onclick="playAnim(this, 'anim-fade')">I'll let you choose the music.</li>
        <li onclick="playAnim(this, 'anim-slide')">Unlimited cuddles supply.</li>
        <li onclick="playAnim(this, 'anim-drip')">My bros already love you.</li>
      </ul>
      <button id="backBtn">Okay, I'm convinced! üò§</button>
    </section>

    <section id="view3" class="view-section hidden">
      <h2 style="font-size: 2.5rem; color: var(--yes);">YAY! üéâ</h2>
      <p>Best decision ever!</p>
      
      <img class="bounce-img" src="https://github.com/jute031005-cloud/Paras_valentine/blob/v3/assets/image_paras.png?raw=true" alt="Us" />
      </section>
  </main>

  <script>
    /* --- VARIABLES --- */
    const views = {
      1: document.getElementById("view1"),
      2: document.getElementById("view2"),
      3: document.getElementById("view3")
    };
    const steps = {
      1: document.getElementById("step1"),
      2: document.getElementById("step2"),
      3: document.getElementById("step3")
    };
    const zone = document.getElementById("zone");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const whyBtn = document.getElementById("whyBtn");
    const backBtn = document.getElementById("backBtn");

    /* --- NAVIGATION LOGIC --- */
    function switchView(viewNumber) {
      // Hide all
      Object.values(views).forEach(el => el.classList.add("hidden"));
      // Show Target
      views[viewNumber].classList.remove("hidden");
      
      // Update Progress Bar
      Object.values(steps).forEach(el => el.classList.remove("active"));
      for(let i=1; i<=viewNumber; i++) {
        steps[i].classList.add("active");
      }
    }

    whyBtn.addEventListener("click", () => switchView(2));
    backBtn.addEventListener("click", () => switchView(1));

    yesBtn.addEventListener("click", () => {
      switchView(3);
      fireConfetti();
    });

    /* --- WONKY ANIMATIONS --- */
    function playAnim(element, animClass) {
      // Reset animation
      element.classList.remove(animClass);
      void element.offsetWidth; // Trigger reflow
      element.classList.add(animClass);
    }

    /* --- NO BUTTON EVASION --- */
    let yesScale = 1;

    function moveNo() {
      const z = zone.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      const y = yesBtn.getBoundingClientRect();

      let newLeft, newTop, isOverlapping = true;

      // Try until we find a safe spot
      while (isOverlapping) {
        newLeft = Math.random() * (z.width - b.width);
        newTop = Math.random() * (z.height - b.height);

        // Check distance from center of Yes button
        const buffer = 30; 
        const yesCX = (y.left - z.left) + y.width/2;
        const yesCY = (y.top - z.top) + y.height/2;
        const noCX  = newLeft + b.width/2;
        const noCY  = newTop + b.height/2;

        const dist = Math.hypot(noCX - yesCX, noCY - yesCY);
        
        // Ensure buttons don't touch
        if (dist > (y.width/2 + b.width/2 + buffer)) {
          isOverlapping = false;
        }
      }

      noBtn.style.left = `${newLeft}px`;
      noBtn.style.top = `${newTop}px`;
      
      // Grow Yes Button
      yesScale = Math.min(2.5, yesScale + 0.1);
      yesBtn.style.transform = `scale(${yesScale})`;
    }

    noBtn.addEventListener("touchstart", (e) => { e.preventDefault(); moveNo(); });
    noBtn.addEventListener("mouseover", moveNo);

    /* --- BACKGROUND HEARTS --- */
    setInterval(() => {
      const heart = document.createElement("div");
      heart.innerHTML = "‚ù§Ô∏è";
      heart.style.position = "fixed";
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.top = "105vh";
      heart.style.fontSize = (Math.random() * 20 + 10) + "px";
      heart.style.transition = `transform ${Math.random() * 3 + 3}s linear, opacity 3s`;
      heart.style.opacity = Math.random();
      
      document.getElementById("bgHearts").appendChild(heart);
      setTimeout(() => {
        heart.style.transform = `translateY(-110vh) rotate(${Math.random() * 360}deg)`;
        heart.style.opacity = "0";
      }, 50);
      setTimeout(() => heart.remove(), 6000);
    }, 300);

    /* --- CONFETTI --- */
    function fireConfetti() {
      const duration = 3000;
      const end = Date.now() + duration;
      (function frame() {
        confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#ff4d8d', '#ff8fa3'] });
        confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#ff4d8d', '#ff8fa3'] });
        if (Date.now() < end) requestAnimationFrame(frame);
      }());
    }

    /* --- LOVESICK TIMER --- */
    const startTime = new Date();
    function updateTimer() {
      const now = new Date();
      const diff = Math.floor((now - startTime) / 1000);
      const h = Math.floor(diff / 3600).toString().padStart(2, '0');
      const m = Math.floor((diff % 3600) / 60).toString().padStart(2, '0');
      const s = (diff % 60).toString().padStart(2, '0');
      document.getElementById("timer").innerText = `Waiting since: ${h}:${m}:${s}`;
    }
    setInterval(updateTimer, 1000);

  </script>
</body>
</html>
